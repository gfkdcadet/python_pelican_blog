
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/font-awesome.min.css">




    <link rel="shortcut icon" href="/images/dodgest_logo3.jpg" type="image/x-icon">
    <link rel="icon" href="/images/dodgest_logo3.jpg" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Chris Cronin" />
<meta name="description" content="Project McNulty - Classifying Census Data¶ Table of contents¶ Introduction Query and Dataframe Script Classification Models w/ GridSearch Voting Model Classifier Conclusion Introduction ¶ Classified Census Income to identify part-time and full-time workers (= 40hrs worked per week) using KNN, Logistic Regression, SVM, and Random Forest. Setup an AWS instance to work with the data, and created a python script to query the data into a workable dataframe. Evaluated models using 3-fold cross validation, optimized parameters using GridSearch, and combined models using VotingClassifier. The best classification model/method was support vector classification, which had an accuracy of 82%." />
<meta name="keywords" content="Metis">
<meta property="og:site_name" content="Chris' Blog"/>
<meta property="og:title" content="Metis - Project Mcnulty"/>
<meta property="og:description" content="Project McNulty - Classifying Census Data¶ Table of contents¶ Introduction Query and Dataframe Script Classification Models w/ GridSearch Voting Model Classifier Conclusion Introduction ¶ Classified Census Income to identify part-time and full-time workers (= 40hrs worked per week) using KNN, Logistic Regression, SVM, and Random Forest. Setup an AWS instance to work with the data, and created a python script to query the data into a workable dataframe. Evaluated models using 3-fold cross validation, optimized parameters using GridSearch, and combined models using VotingClassifier. The best classification model/method was support vector classification, which had an accuracy of 82%."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/Metis - Project Mcnulty.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-03-10 20:00:00-08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/chris-cronin.html">
<meta property="article:section" content="Projects"/>
<meta property="article:tag" content="Metis"/>
<meta property="og:image" content="/images/profshot.jpg">

  <title>Chris' Blog &ndash; Metis - Project Mcnulty</title>


  <link rel="stylesheet" type="text/css" href="/theme/stylesheet/resources.css">
</head>
<body>
  <aside>
    <div>
      <a href="">
        <img src="/images/profshot.jpg" alt="Chris Cronin" title="Chris Cronin">
      </a>
      <h1><a href="">Chris Cronin</a></h1>

<p>MBA & Data Scientist</p>
      <nav>
        <ul class="list">
          <li><a href="/pages/about.html">About</a></li>
          <li><a href="/category/projects.html">Projects</a></li>
          <li><a href="/pages/programs.html">Programs</a></li>
          <li><a href="/pages/conferences.html">Conferences</a></li>
        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-linkedin" href="https://www.linkedin.com/in/cvcronin" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-github" href="https://github.com/ccronin51" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>

    <nav>
      <a href="/index.html">    Home
</a>

      <a href="/category/projects.html">Projects</a>
      <a href="/tags.html">Tags</a>
      <a href="/pages/resources.html">Resources</a>


    </nav>

<article class="single">
  <header>
    <h1 id="Metis - Project Mcnulty">Metis - Project Mcnulty</h1>
    <p>
          Posted on Thu 10 March 2016 in <a href="/category/projects.html">Projects</a>


    </p>
  </header>


  <div class="article_content">
    <style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Project-McNulty---Classifying-Census-Data">Project McNulty - Classifying Census Data<a class="anchor-link" href="#Project-McNulty---Classifying-Census-Data">¶</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Table-of-contents">Table of contents<a class="anchor-link" href="#Table-of-contents">¶</a></h1><ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#Query and Dataframe Script">Query and Dataframe Script</a></li>
<li><a href="#Classification Models w/ GridSearch">Classification Models w/ GridSearch</a></li>
<li><a href="#Voting Model Classifier">Voting Model Classifier</a></li>
<li><a href="#Conclusion">Conclusion</a></li>
</ol>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Introduction-">Introduction <a name="introduction"></a><a class="anchor-link" href="#Introduction-">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Classified <a href="https://archive.ics.uci.edu/ml/datasets/Census+Income">Census Income</a> to identify part-time and full-time workers (< or >= 40hrs worked per week) using KNN, Logistic Regression, SVM, and Random Forest. Setup an AWS instance to work with the data, and created a python script to query the data into a workable dataframe. Evaluated models using 3-fold cross validation, optimized parameters using GridSearch, and combined models using VotingClassifier. The best classification model/method was support vector classification, which had an accuracy of 82%.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Imports">Imports<a class="anchor-link" href="#Imports">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># General</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">random</span> 
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>

<span class="c1"># Plotting</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">statsmodels.formula.api</span> <span class="kn">as</span> <span class="nn">smf</span>
<span class="kn">import</span> <span class="nn">patsy</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">seaborn</span> <span class="kn">import</span> <span class="n">plt</span>

<span class="c1"># sklearn models</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.naive_bayes</span> <span class="kn">import</span> <span class="n">GaussianNB</span>
<span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">linear_model</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">metrics</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">tree</span>
<span class="kn">from</span> <span class="nn">sklearn.cross_validation</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Query-and-Dataframe-Script-">Query and Dataframe Script <a name="Query and Dataframe Script"></a><a class="anchor-link" href="#Query-and-Dataframe-Script-">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The script below creates a sql query for the census data that was put on Amazon Web service for cloud collaboration. It filters the data into specific feature and response colums. Note the feature columns use "get dummies" to create separate feature columns for categorical responses while the response column is 'hour binned'. The administrative information (passwords etc) below have all been been changed for security purposes.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">dbname</span> <span class="o">=</span> <span class="s1">'mcnulty'</span>
<span class="n">user</span> <span class="o">=</span> <span class="s1">'USERNAME'</span>
<span class="n">password</span> <span class="o">=</span> <span class="s1">'@@@@'</span>
<span class="n">host</span> <span class="o">=</span> <span class="s1">'ec2-51-34-173-157.us-west-2.compute.amazonaws.com'</span>
<span class="n">port</span> <span class="o">=</span> <span class="s1">'5432'</span>

<span class="c1"># input must be strings</span>
<span class="k">def</span> <span class="nf">query_database</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">dbname</span><span class="o">=</span><span class="s1">'mcnulty'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s1">'@@@@'</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s1">'ec2-51-34-173-157.us-west-2.compute.amazonaws.com'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="s1">'5432'</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    dbname: databse name</span>
<span class="sd">    user: username</span>
<span class="sd">    password: password for the user</span>
<span class="sd">    host: public dns</span>
<span class="sd">    port: typically for postgresql 5432</span>
<span class="sd">    returns a dataframe given query</span>
<span class="sd">    '''</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Create connection with database</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">"dbname="</span><span class="o">+</span><span class="n">dbname</span><span class="o">+</span><span class="s2">" user="</span><span class="o">+</span><span class="n">user</span><span class="o">+</span><span class="s2">" password="</span><span class="o">+</span><span class="n">password</span><span class="o">+</span><span class="s2">" host="</span><span class="o">+</span><span class="n">host</span><span class="o">+</span><span class="s2">" port="</span><span class="o">+</span><span class="n">port</span><span class="p">)</span>
        <span class="k">print</span> <span class="s2">"Connected"</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

        <span class="c1"># Ask for user's SQL query</span>
        <span class="k">print</span> <span class="s2">"Query please: "</span>
        <span class="n">input_query</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">()</span>

        <span class="c1"># Execute search query</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">input_query</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

        <span class="c1"># Return dataframe</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">df</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">"Connection error or query mistake"</span>

        
<span class="k">def</span> <span class="nf">clean_data_x_y</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    df: input census dataframe (all data)</span>
<span class="sd">    return: processed dataframe</span>
<span class="sd">    '''</span>
    <span class="n">df_1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">df_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># delete original index column</span>
    <span class="n">df_1</span> <span class="o">=</span> <span class="n">df_1</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="n">df_1</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'age'</span><span class="p">,</span><span class="s1">'workclass'</span><span class="p">,</span><span class="s1">'fnlwgt'</span><span class="p">,</span><span class="s1">'education'</span><span class="p">,</span><span class="s1">'education_years'</span><span class="p">,</span><span class="s1">'marital_status'</span><span class="p">,</span><span class="s1">'occupation'</span><span class="p">,</span><span class="s1">'relationship'</span><span class="p">,</span><span class="s1">'race'</span><span class="p">,</span><span class="s1">'sex'</span><span class="p">,</span><span class="s1">'capital_gain'</span><span class="p">,</span><span class="s1">'capital_loss'</span><span class="p">,</span><span class="s1">'hours_per_week'</span><span class="p">,</span><span class="s1">'native_country'</span><span class="p">,</span><span class="s1">'income'</span><span class="p">,</span><span class="s1">'source'</span><span class="p">]</span>
    <span class="c1"># removing whitespace from columns with string values</span>
    <span class="n">string_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'workclass'</span><span class="p">,</span><span class="s1">'education'</span><span class="p">,</span><span class="s1">'marital_status'</span><span class="p">,</span><span class="s1">'occupation'</span><span class="p">,</span><span class="s1">'relationship'</span><span class="p">,</span><span class="s1">'race'</span><span class="p">,</span><span class="s1">'sex'</span><span class="p">,</span><span class="s1">'native_country'</span><span class="p">,</span><span class="s1">'income'</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">string_cols</span><span class="p">:</span>
        <span class="n">df_1</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_1</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">strip</span><span class="p">)</span>
    <span class="n">df_1</span><span class="p">[</span><span class="s1">'hour_binned'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span> <span class="k">if</span> <span class="n">i</span> <span class="o"><</span> <span class="mi">40</span> <span class="k">else</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df_1</span><span class="p">[</span><span class="s1">'hours_per_week'</span><span class="p">]]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">df_1</span><span class="p">[[</span><span class="s1">'age'</span><span class="p">,</span><span class="s1">'workclass'</span><span class="p">,</span><span class="s1">'education'</span><span class="p">,</span><span class="s1">'education_years'</span><span class="p">,</span><span class="s1">'marital_status'</span><span class="p">,</span><span class="s1">'occupation'</span><span class="p">,</span><span class="s1">'relationship'</span><span class="p">,</span><span class="s1">'race'</span><span class="p">,</span><span class="s1">'sex'</span><span class="p">,</span><span class="s1">'capital_gain'</span><span class="p">,</span><span class="s1">'capital_loss'</span><span class="p">,</span><span class="s1">'native_country'</span><span class="p">,</span><span class="s1">'income'</span><span class="p">]]</span>
    <span class="n">y</span> <span class="o">=</span>  <span class="n">df_1</span><span class="p">[</span><span class="s1">'hour_binned'</span><span class="p">]</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'workclass'</span><span class="p">,</span><span class="s1">'education'</span><span class="p">,</span><span class="s1">'marital_status'</span><span class="p">,</span><span class="s1">'occupation'</span><span class="p">,</span><span class="s1">'relationship'</span><span class="p">,</span><span class="s1">'race'</span><span class="p">,</span><span class="s1">'sex'</span><span class="p">,</span><span class="s1">'native_country'</span><span class="p">,</span><span class="s1">'income'</span><span class="p">])</span>  
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span>    
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The script is then imported and it's functions are used to query the data into a dataframe.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">import</span> <span class="nn">project_mcnulty2class</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">project_mcnulty2class</span><span class="o">.</span><span class="n">query_database</span><span class="p">(</span><span class="s1">'chris'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Connected
Query please: 
Select * From Census
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[6]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>0</th>
<th>1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6</th>
<th>7</th>
<th>8</th>
<th>9</th>
<th>10</th>
<th>11</th>
<th>12</th>
<th>13</th>
<th>14</th>
<th>15</th>
<th>16</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>2</td>
<td>50</td>
<td>Self-emp-not-inc</td>
<td>83311</td>
<td>Bachelors</td>
<td>13</td>
<td>Married-civ-spouse</td>
<td>Exec-managerial</td>
<td>Husband</td>
<td>White</td>
<td>Male</td>
<td>0</td>
<td>0</td>
<td>13</td>
<td>United-States</td>
<td><=50K</td>
<td>train</td>
</tr>
<tr>
<th>1</th>
<td>3</td>
<td>38</td>
<td>Private</td>
<td>215646</td>
<td>HS-grad</td>
<td>9</td>
<td>Divorced</td>
<td>Handlers-cleaners</td>
<td>Not-in-family</td>
<td>White</td>
<td>Male</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>United-States</td>
<td><=50K</td>
<td>train</td>
</tr>
<tr>
<th>2</th>
<td>4</td>
<td>53</td>
<td>Private</td>
<td>234721</td>
<td>11th</td>
<td>7</td>
<td>Married-civ-spouse</td>
<td>Handlers-cleaners</td>
<td>Husband</td>
<td>Black</td>
<td>Male</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>United-States</td>
<td><=50K</td>
<td>train</td>
</tr>
<tr>
<th>3</th>
<td>5</td>
<td>28</td>
<td>Private</td>
<td>338409</td>
<td>Bachelors</td>
<td>13</td>
<td>Married-civ-spouse</td>
<td>Prof-specialty</td>
<td>Wife</td>
<td>Black</td>
<td>Female</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>Cuba</td>
<td><=50K</td>
<td>train</td>
</tr>
<tr>
<th>4</th>
<td>6</td>
<td>37</td>
<td>Private</td>
<td>284582</td>
<td>Masters</td>
<td>14</td>
<td>Married-civ-spouse</td>
<td>Exec-managerial</td>
<td>Wife</td>
<td>White</td>
<td>Female</td>
<td>0</td>
<td>0</td>
<td>40</td>
<td>United-States</td>
<td><=50K</td>
<td>train</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">project_mcnulty2class</span><span class="o">.</span><span class="n">clean_data_x_y</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[8]:</div>
<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>age</th>
<th>education_years</th>
<th>capital_gain</th>
<th>capital_loss</th>
<th>workclass_Federal-gov</th>
<th>workclass_Local-gov</th>
<th>workclass_Private</th>
<th>workclass_Self-emp-inc</th>
<th>workclass_Self-emp-not-inc</th>
<th>workclass_State-gov</th>
<th>...</th>
<th>native_country_Scotland</th>
<th>native_country_South</th>
<th>native_country_Taiwan</th>
<th>native_country_Thailand</th>
<th>native_country_Trinadad&Tobago;</th>
<th>native_country_United-States</th>
<th>native_country_Vietnam</th>
<th>native_country_Yugoslavia</th>
<th>income_<=50K</th>
<th>income_>50K</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>50</td>
<td>13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<th>1</th>
<td>38</td>
<td>9</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<th>2</th>
<td>53</td>
<td>7</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<th>3</th>
<td>28</td>
<td>13</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<th>4</th>
<td>37</td>
<td>14</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>...</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>5 rows × 104 columns</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The respone column "hours binned" is now converted to categorical responses of zeros and ones depending on hours worked per week.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">y</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="c1"># 0 < 40</span>
<span class="c1"># 1 >= 40</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[9]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0    0
1    1
2    1
3    1
4    1
Name: hour_binned, dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The data is then separated into training and testing subsections</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Classification-Models-w/-GridSearch-">Classification Models w/ GridSearch <a name="Classification Models w/ GridSearch"></a><a class="anchor-link" href="#Classification-Models-w/-GridSearch-">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.grid_search</span> <span class="kn">import</span> <span class="n">GridSearchCV</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">confusion_matrix</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">classification_report</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Logistic-Regression">Logistic Regression<a class="anchor-link" href="#Logistic-Regression">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Parameter C is cost function. The lower value of C, the lower the complexity of the model. params_c shows the seven different values of c we will test with the logistic model. Note, param_grid, not param_c is used in the grid search.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">params_c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)</span> <span class="c1"># 10^-3 to 10^3</span>
<span class="n">params_c</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[12]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([  1.00000000e-03,   1.00000000e-02,   1.00000000e-01,
         1.00000000e+00,   1.00000000e+01,   1.00000000e+02,
         1.00000000e+03])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Setup grid search with model and search parameters</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logreg_grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">LogisticRegression</span><span class="p">(),</span> <span class="n">param_grid</span><span class="o">=</span><span class="p">{</span><span class="s1">'C'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">)})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Fit on the Training section</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logreg_grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[16]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>GridSearchCV(cv=None, error_score='raise',
       estimator=LogisticRegression(C=1.0, class_weight=None, dual=False, fit_intercept=True,
          intercept_scaling=1, max_iter=100, multi_class='ovr', n_jobs=1,
          penalty='l2', random_state=None, solver='liblinear', tol=0.0001,
          verbose=0, warm_start=False),
       fit_params={}, iid=True, n_jobs=1,
       param_grid={'C': array([  1.00000e-03,   1.00000e-02,   1.00000e-01,   1.00000e+00,
         1.00000e+01,   1.00000e+02,   1.00000e+03])},
       pre_dispatch='2*n_jobs', refit=True, scoring=None, verbose=0)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># Predict on the Test section (predicting 1 or 0)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">log_pred_search_pred</span> <span class="o">=</span> <span class="n">logreg_grid_search</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">log_pred_search_pred</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[18]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([1, 1, 1, ..., 1, 0, 1])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Prediction Breakdown Analysis</p>
<ul>
<li>Precision: True Pos / (True pos + False Positives). </li>
<li>Recall: True Pos / (true pos + false negatives)</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="k">print</span> <span class="n">metrics</span><span class="o">.</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">log_pred_search_pred</span><span class="p">)</span>
<span class="k">print</span> <span class="n">metrics</span><span class="o">.</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">log_pred_search_pred</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>0.797597110636
             precision    recall  f1-score   support

          0       0.61      0.27      0.37      3034
          1       0.82      0.95      0.88     10533

avg / total       0.77      0.80      0.77     13567

</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># What is the best "C" parameter</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logreg_grid_search</span><span class="o">.</span><span class="n">best_params_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[20]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'C': 1.0}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># What are the accuracy scores for all seven "C" parameters? This shows that there's no point of further find tuning C.</span>
<span class="c1"># If we want a better model, update features. </span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [21]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logreg_grid_search</span><span class="o">.</span><span class="n">grid_scores_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[21]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[mean: 0.78742, std: 0.00183, params: {'C': 0.001},
 mean: 0.80126, std: 0.00063, params: {'C': 0.01},
 mean: 0.80287, std: 0.00035, params: {'C': 0.10000000000000001},
 mean: 0.80375, std: 0.00067, params: {'C': 1.0},
 mean: 0.80284, std: 0.00046, params: {'C': 10.0},
 mean: 0.80341, std: 0.00056, params: {'C': 100.0},
 mean: 0.80255, std: 0.00173, params: {'C': 1000.0}]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># {'C': 1.0} produces the best accuracy score of 0.80375</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [22]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">logreg_grid_search</span><span class="o">.</span><span class="n">best_score_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[22]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0.80375308017944025</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The Confusion Matrix below shows that:</p>
<ul>
<li>A0: Model predicted "0" correct 807 times</li>
<li>B0: Model predicted "0" incorrect 2227 times</li>
<li>A1: Model predicted "1" correct 10014 times</li>
<li>B1: Model predicted "1" incorrect 519 times </li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [24]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">confusion_matrix</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">logreg_grid_search</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
<span class="c1">#     [ A ]   [B ] </span>
<span class="c1"># 0  [ 807,  2227] </span>
<span class="c1"># 1  [ 519, 10014]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[24]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>array([[  807,  2227],
       [  519, 10014]])</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="KNN">KNN<a class="anchor-link" href="#KNN">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In a KNN model, the parameter being tuned is how many "nearest neighbors" to choose from. Here we implement grid search with the numbers in the range below:\</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [26]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[26]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>[3, 5, 7, 9, 11, 13, 15, 17, 19, 21]</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [27]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">knn_grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">KNeighborsClassifier</span><span class="p">(),</span> <span class="n">param_grid</span><span class="o">=</span><span class="p">{</span><span class="s1">'n_neighbors'</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">2</span><span class="p">)})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The training section of the data is fit on the grid search model resulting in 19 nearest neighbors as the optimal parameter with 81% accuracy score.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [28]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">knn_grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[28]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>GridSearchCV(cv=None, error_score='raise',
       estimator=KNeighborsClassifier(algorithm='auto', leaf_size=30, metric='minkowski',
           metric_params=None, n_jobs=1, n_neighbors=5, p=2,
           weights='uniform'),
       fit_params={}, iid=True, n_jobs=1,
       param_grid={'n_neighbors': [3, 5, 7, 9, 11, 13, 15, 17, 19, 21]},
       pre_dispatch='2*n_jobs', refit=True, scoring=None, verbose=0)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [29]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">X_train</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[29]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>(31654, 104)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [30]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">knn_grid_search</span><span class="o">.</span><span class="n">best_score_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[30]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0.81777974347633786</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [31]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">knn_grid_search</span><span class="o">.</span><span class="n">best_params_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[31]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'n_neighbors': 19}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Model setup using optimal parameter 19 nearest neighbors</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [38]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">knnroc</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
<span class="n">knnroc</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">knnroc_pred</span> <span class="o">=</span> <span class="n">knnroc</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="k">print</span> <span class="n">metrics</span><span class="o">.</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knnroc_pred</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>0.812781012752
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Use model to predict probability of each outcome, to be used in ROC curve, which shows that the model does a decent job at predicting. The area under the curve represents the correct percentage predicted by the model. A curve hugging the upper left corner is ideal while a diagonal line represents the model does a random job explaining only 50%.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">knn_probs</span> <span class="o">=</span> <span class="n">knnroc</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">]</span>
<span class="k">print</span> <span class="n">metrics</span><span class="o">.</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knn_probs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>0.765842305825
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">,</span> <span class="n">thresholds</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="n">roc_curve</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knn_probs</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fpr</span><span class="p">,</span> <span class="n">tpr</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">'False Positive Rate (1 - Specificity)'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">'True Positive Rate (Sensitivity)'</span><span class="p">)</span>
<span class="c1"># random is .5</span>
<span class="c1"># want area to be as close to 1</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[40]:</div>
<div class="output_text output_subarea output_execute_result">
<pre><matplotlib.text.text at 0x114f3e350></pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
">
</img></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Naive-Bayes">Naive Bayes<a class="anchor-link" href="#Naive-Bayes">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="c1"># No Paremeters. Model produces accuracy score of 68%. </span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [35]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">nb_model</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="n">nb_model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">nb_model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span><span class="n">y_test</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[35]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0.68755067443060369</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Decision-Tree">Decision Tree<a class="anchor-link" href="#Decision-Tree">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The parameter "max depth" is searched yielding the best accuracy score of 80% with a max depth of 3.98. This means the tree can have leaves anywhere between 1 and 3.98 layers deep.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">tree_grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">DecisionTreeClassifier</span><span class="p">(),</span> <span class="n">param_grid</span><span class="o">=</span><span class="p">{</span><span class="s1">'max_depth'</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">logspace</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">tree_grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[40]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>GridSearchCV(cv=None, error_score='raise',
       estimator=DecisionTreeClassifier(class_weight=None, criterion='gini', max_depth=None,
            max_features=None, max_leaf_nodes=None, min_samples_leaf=1,
            min_samples_split=2, min_weight_fraction_leaf=0.0,
            presort=False, random_state=None, splitter='best'),
       fit_params={}, iid=True, n_jobs=1,
       param_grid={'max_depth': array([  1.00000e-03,   1.58489e-02,   2.51189e-01,   3.98107e+00,
         6.30957e+01,   1.00000e+03])},
       pre_dispatch='2*n_jobs', refit=True, scoring=None, verbose=0)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [41]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">tree_grid_search</span><span class="o">.</span><span class="n">best_params_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[41]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'max_depth': 3.9810717055349691}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [42]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">tree_grid_search</span><span class="o">.</span><span class="n">best_score_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[42]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0.80975548113982432</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Random-Forest">Random Forest<a class="anchor-link" href="#Random-Forest">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The parameter n_estimators is searched yielding 1000 as the optimal parameter. n_estimators represents the number of trees in the forest. Note, code isn't run in this notebook.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">forest_grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">RandomForestClassifier</span><span class="p">(),</span> <span class="n">param_grid</span><span class="o">=</span><span class="p">{</span><span class="s1">'n_estimators'</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">1000</span><span class="p">]})</span>
<span class="n">forest_grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">forest_grid_search</span><span class="o">.</span><span class="n">best_params_</span>
<span class="n">forest_grid_search</span><span class="o">.</span><span class="n">best_score_</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="SVC">SVC<a class="anchor-link" href="#SVC">¶</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For support vector classification, the parameter "C" represents the penalty of the error term. Searching through three values (.01,1,100) yields "1" as an optimal value of "C" with a 82% classification rate.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [43]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">svc_grid_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">SVC</span><span class="p">(),</span> <span class="n">param_grid</span><span class="o">=</span><span class="p">{</span><span class="s1">'C'</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="mo">01</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">]})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [44]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">svc_grid_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[44]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>GridSearchCV(cv=None, error_score='raise',
       estimator=SVC(C=1.0, cache_size=200, class_weight=None, coef0=0.0,
  decision_function_shape=None, degree=3, gamma='auto', kernel='rbf',
  max_iter=-1, probability=False, random_state=None, shrinking=True,
  tol=0.001, verbose=False),
       fit_params={}, iid=True, n_jobs=1, param_grid={'C': [0.01, 1, 100]},
       pre_dispatch='2*n_jobs', refit=True, scoring=None, verbose=0)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [45]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">svc_grid_search</span><span class="o">.</span><span class="n">best_params_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[45]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>{'C': 1}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [46]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">svc_grid_search</span><span class="o">.</span><span class="n">best_score_</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt output_prompt">Out[46]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>0.81888544891640869</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Voting-Model-Classifier-">Voting Model Classifier <a name="Voting Model Classifier"></a><a class="anchor-link" href="#Voting-Model-Classifier-">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [47]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.cross_validation</span> <span class="kn">import</span> <span class="n">cross_val_score</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">VotingClassifier</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Variables for each model are created using the optimal parameters found via grid search. Note, the decision tree model isn't used here due to running time constraints.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [49]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">clf1</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">clf2</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">clf3</span> <span class="o">=</span> <span class="n">GaussianNB</span><span class="p">()</span>
<span class="n">clf4</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">19</span><span class="p">)</span>
<span class="n">clf5</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="c1"># Soft: It adds all the probabilites, then averages the probabilites, takes the best</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The VotingClassifier combines the various classification models and chooses a class based on different methods. The prediction score automatically does cross validation.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first voting method (voting="hard") means each model has a vote on predicting whether someone works less than or greater than/equal to 40 hours a week. It will take the majority of the votes, meaning if three out of five models predict "0" or less than 40 hours a week, then the classification will result in a "0"</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [50]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">eclf1</span> <span class="o">=</span> <span class="n">VotingClassifier</span><span class="p">(</span><span class="n">estimators</span><span class="o">=</span><span class="p">[(</span><span class="s1">'lr'</span><span class="p">,</span> <span class="n">clf1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'rf'</span><span class="p">,</span> <span class="n">clf2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'gnb'</span><span class="p">,</span> <span class="n">clf3</span><span class="p">),</span> <span class="p">(</span><span class="s1">'knn'</span><span class="p">,</span> <span class="n">clf4</span><span class="p">),(</span><span class="s1">'SVC'</span><span class="p">,</span><span class="n">clf5</span><span class="p">)],</span> <span class="n">voting</span><span class="o">=</span><span class="s1">'hard'</span><span class="p">)</span>
<span class="n">eclf1</span> <span class="o">=</span> <span class="n">eclf1</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">eclf1</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">eclf1</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span><span class="n">y_test</span><span class="p">))</span> <span class="c1">#automatically does cross validation</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[1 1 1 ..., 1 0 1]
0.815950468047
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The second voting method (voting="soft") means each model represents a probability of being a certain class. It then chooses the class based on an average of all the probabilities, and takes the more likely probability.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [51]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">eclf2</span> <span class="o">=</span> <span class="n">VotingClassifier</span><span class="p">(</span><span class="n">estimators</span><span class="o">=</span><span class="p">[(</span><span class="s1">'lr'</span><span class="p">,</span> <span class="n">clf1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'rf'</span><span class="p">,</span> <span class="n">clf2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'gnb'</span><span class="p">,</span> <span class="n">clf3</span><span class="p">),</span> <span class="p">(</span><span class="s1">'knn'</span><span class="p">,</span> <span class="n">clf4</span><span class="p">)],</span><span class="n">voting</span><span class="o">=</span><span class="s1">'soft'</span><span class="p">)</span>
<span class="n">eclf2</span> <span class="o">=</span> <span class="n">eclf2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">eclf2</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">eclf2</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span><span class="n">y_test</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[1 1 1 ..., 1 0 1]
0.797670818899
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The third voting method (voting="soft") with weights=[2,1,1,1] means that the class is being chosen based on a probabilistic approach but certain models are weighted more heavily in importance.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [52]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython2"><pre><span></span><span class="n">eclf3</span> <span class="o">=</span> <span class="n">VotingClassifier</span><span class="p">(</span><span class="n">estimators</span><span class="o">=</span><span class="p">[(</span><span class="s1">'lr'</span><span class="p">,</span> <span class="n">clf1</span><span class="p">),</span> <span class="p">(</span><span class="s1">'rf'</span><span class="p">,</span> <span class="n">clf2</span><span class="p">),</span> <span class="p">(</span><span class="s1">'gnb'</span><span class="p">,</span> <span class="n">clf3</span><span class="p">),</span> <span class="p">(</span><span class="s1">'knn'</span><span class="p">,</span> <span class="n">clf4</span><span class="p">)],</span><span class="n">voting</span><span class="o">=</span><span class="s1">'soft'</span><span class="p">,</span> <span class="n">weights</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">eclf3</span> <span class="o">=</span> <span class="n">eclf3</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">eclf3</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">eclf3</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span><span class="n">y_test</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>[1 1 1 ..., 1 0 1]
0.802830397288
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Conclusion-">Conclusion <a name="Conclusion"></a><a class="anchor-link" href="#Conclusion-">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This project created a script that called the census dataset by querying amazon web service to transform it into a workable dataframe. Then different classification models were tested on training and testing sections of the dataset using grid search to find optimal parameters. Finally, a voting classifer combined all the models and classified based on several voting methods. The first voting classifier "eclf1" produced a high accuracy score of 81.5% but the highest came from the sole use of the support vector classification model with an accuracy score of 81.8%.</p>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/metis.html">Metis</a>
    </p>
  </div>




</article>

    <footer>
<p>&copy; Chris Cronin </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Chris' Blog ",
  "url" : "",
  "image": "/images/profshot.jpg",
  "description": ""
}
</script>

</body>
</html>